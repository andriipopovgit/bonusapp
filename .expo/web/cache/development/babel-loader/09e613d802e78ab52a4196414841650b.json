{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { StatusBar } from 'expo-status-bar';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport { useEffect, useRef, useState } from 'react';\nimport { Camera } from 'expo-camera';\nimport { shareAsync } from 'expo-sharing';\nimport * as MediaLibrary from 'expo-media-library';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function App() {\n  var cameraRef = useRef();\n\n  var _useState = useState(),\n      _useState2 = _slicedToArray(_useState, 2),\n      hasCameraPermission = _useState2[0],\n      setHasCameraPermission = _useState2[1];\n\n  var _useState3 = useState(),\n      _useState4 = _slicedToArray(_useState3, 2),\n      hasMediaLibraryPermission = _useState4[0],\n      setHasMediaLibraryPermission = _useState4[1];\n\n  var _useState5 = useState(),\n      _useState6 = _slicedToArray(_useState5, 2),\n      photo = _useState6[0],\n      setPhoto = _useState6[1];\n\n  useEffect(function () {\n    (function _callee() {\n      var cameraPermission, mediaLibraryPermission;\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _regeneratorRuntime.awrap(Camera.requestCameraPermissionsAsync());\n\n            case 2:\n              cameraPermission = _context.sent;\n              _context.next = 5;\n              return _regeneratorRuntime.awrap(MediaLibrary.requestPermissionsAsync());\n\n            case 5:\n              mediaLibraryPermission = _context.sent;\n              setHasCameraPermission(cameraPermission.status === \"granted\");\n              setHasMediaLibraryPermission(mediaLibraryPermission.status === \"granted\");\n\n            case 8:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    })();\n  }, []);\n\n  if (hasCameraPermission === undefined) {\n    return _jsx(Text, {\n      children: \"Requesting permissions...\"\n    });\n  } else if (!hasCameraPermission) {\n    return _jsx(Text, {\n      children: \"Permission for camera not granted. Please change this in settings.\"\n    });\n  }\n\n  var takePic = function takePic() {\n    var options, newPhoto;\n    return _regeneratorRuntime.async(function takePic$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            options = {\n              quality: 1,\n              base64: true,\n              exif: false\n            };\n            _context2.next = 3;\n            return _regeneratorRuntime.awrap(cameraRef.current.takePictureAsync(options));\n\n          case 3:\n            newPhoto = _context2.sent;\n            setPhoto(newPhoto);\n\n          case 5:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  if (photo) {\n    var sharePic = function sharePic() {\n      shareAsync(photo.uri).then(function () {\n        setPhoto(undefined);\n      });\n    };\n\n    var savePhoto = function savePhoto() {\n      MediaLibrary.saveToLibraryAsync(photo.uri).then(function () {\n        setPhoto(undefined);\n      });\n    };\n\n    return _jsxs(SafeAreaView, {\n      style: styles.container,\n      children: [_jsx(Image, {\n        style: styles.preview,\n        source: {\n          uri: \"data:image/jpg;base64,\" + photo.base64\n        }\n      }), _jsx(Button, {\n        title: \"Share\",\n        onPress: sharePic\n      }), hasMediaLibraryPermission ? _jsx(Button, {\n        title: \"Save\",\n        onPress: savePhoto\n      }) : undefined, _jsx(Button, {\n        title: \"Discard\",\n        onPress: function onPress() {\n          return setPhoto(undefined);\n        }\n      })]\n    });\n  }\n\n  return _jsxs(Camera, {\n    style: styles.container,\n    ref: cameraRef,\n    children: [_jsx(View, {\n      style: styles.buttonContainer,\n      children: _jsx(Button, {\n        title: \"Take Pic\",\n        onPress: takePic\n      })\n    }), _jsx(StatusBar, {\n      style: \"auto\"\n    })]\n  });\n}\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n  buttonContainer: {\n    backgroundColor: '#fff',\n    alignSelf: 'flex-end'\n  },\n  preview: {\n    alignSelf: 'stretch',\n    flex: 1\n  }\n});","map":{"version":3,"names":["StatusBar","useEffect","useRef","useState","Camera","shareAsync","MediaLibrary","App","cameraRef","hasCameraPermission","setHasCameraPermission","hasMediaLibraryPermission","setHasMediaLibraryPermission","photo","setPhoto","requestCameraPermissionsAsync","cameraPermission","requestPermissionsAsync","mediaLibraryPermission","status","undefined","takePic","options","quality","base64","exif","current","takePictureAsync","newPhoto","sharePic","uri","then","savePhoto","saveToLibraryAsync","styles","container","preview","buttonContainer","StyleSheet","create","flex","alignItems","justifyContent","backgroundColor","alignSelf"],"sources":["C:/Users/Andrii/Desktop/CameraAppTutorial/App.js"],"sourcesContent":["import { StatusBar } from 'expo-status-bar';\r\nimport { StyleSheet, Text, View, SafeAreaView, Button, Image } from 'react-native';\r\nimport { useEffect, useRef, useState } from 'react';\r\nimport { Camera } from 'expo-camera';\r\nimport { shareAsync } from 'expo-sharing';\r\nimport * as MediaLibrary from 'expo-media-library';\r\n\r\nexport default function App() {\r\n  let cameraRef = useRef();\r\n  const [hasCameraPermission, setHasCameraPermission] = useState();\r\n  const [hasMediaLibraryPermission, setHasMediaLibraryPermission] = useState();\r\n  const [photo, setPhoto] = useState();\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      const cameraPermission = await Camera.requestCameraPermissionsAsync();\r\n      const mediaLibraryPermission = await MediaLibrary.requestPermissionsAsync();\r\n      setHasCameraPermission(cameraPermission.status === \"granted\");\r\n      setHasMediaLibraryPermission(mediaLibraryPermission.status === \"granted\");\r\n    })();\r\n  }, []);\r\n\r\n  if (hasCameraPermission === undefined) {\r\n    return <Text>Requesting permissions...</Text>\r\n  } else if (!hasCameraPermission) {\r\n    return <Text>Permission for camera not granted. Please change this in settings.</Text>\r\n  }\r\n\r\n  let takePic = async () => {\r\n    let options = {\r\n      quality: 1,\r\n      base64: true,\r\n      exif: false\r\n    };\r\n\r\n    let newPhoto = await cameraRef.current.takePictureAsync(options);\r\n    setPhoto(newPhoto);\r\n  };\r\n\r\n  if (photo) {\r\n    let sharePic = () => {\r\n      shareAsync(photo.uri).then(() => {\r\n        setPhoto(undefined);\r\n      });\r\n    };\r\n\r\n    let savePhoto = () => {\r\n      MediaLibrary.saveToLibraryAsync(photo.uri).then(() => {\r\n        setPhoto(undefined);\r\n      });\r\n    };\r\n\r\n    return (\r\n      <SafeAreaView style={styles.container}>\r\n        <Image style={styles.preview} source={{ uri: \"data:image/jpg;base64,\" + photo.base64 }} />\r\n        <Button title=\"Share\" onPress={sharePic} />\r\n        {hasMediaLibraryPermission ? <Button title=\"Save\" onPress={savePhoto} /> : undefined}\r\n        <Button title=\"Discard\" onPress={() => setPhoto(undefined)} />\r\n      </SafeAreaView>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Camera style={styles.container} ref={cameraRef}>\r\n      <View style={styles.buttonContainer}>\r\n        <Button title=\"Take Pic\" onPress={takePic} />\r\n      </View>\r\n      <StatusBar style=\"auto\" />\r\n    </Camera>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n  },\r\n  buttonContainer: {\r\n    backgroundColor: '#fff',\r\n    alignSelf: 'flex-end'\r\n  },\r\n  preview: {\r\n    alignSelf: 'stretch',\r\n    flex: 1\r\n  }\r\n});\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}